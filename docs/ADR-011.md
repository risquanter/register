# ADR-011: Import Conventions

**Status:** Accepted  
**Date:** 2026-01-17  
**Tags:** style, imports, readability, scala

---

## Context

- Fully qualified names **reduce readability**—force horizontal scrolling
- Top-level imports **declare dependencies**—visible at file start
- Local imports **resolve ambiguity**—only when names clash
- Consistent style **aids grep/search**—find usages by short name
- Scala 3 **supports wildcard exports**—package objects can re-export

---

## Decision

### 1. Top-Level Imports for All Regular Usage

Place imports at file top, after package declaration:

```scala
package com.risquanter.register.services

import com.risquanter.register.domain.errors.{ValidationError, ValidationErrorCode, SimulationError}
import com.risquanter.register.domain.data.{RiskTree, RiskLeaf}
import zio.*

class RiskTreeServiceLive extends RiskTreeService {
  // Use short names throughout
  def validate(input: String): Validation[ValidationError, RiskTree] = ...
}
```

### 2. Local Imports Only for Disambiguation

Use local imports only when names genuinely conflict:

```scala
import com.risquanter.register.domain.errors.ValidationError  // our domain error

def process() = {
  // Local import only because external library has same name
  import com.thirdparty.lib.{ValidationError => ThirdPartyError}
  
  val ours: ValidationError = ...
  val theirs: ThirdPartyError = ...
}
```

### 3. Never Fully Qualified in Signatures

Signatures must use short names—fully qualified names are unreadable:

```scala
// GOOD: Clean signature
def create(...): Validation[ValidationError, RiskLeaf]

// BAD: Unreadable signature
def create(...): Validation[com.risquanter.register.domain.errors.ValidationError, RiskLeaf]
```

### 4. Group Imports by Origin

Order imports: Scala stdlib → ZIO → project internals:

```scala
// Scala stdlib
import scala.collection.mutable

// ZIO ecosystem
import zio.*
import zio.prelude.Validation

// Project imports
import com.risquanter.register.domain.errors.*
import com.risquanter.register.domain.data.*
```

---

## Code Smells

### ❌ Fully Qualified Names in Code

```scala
// BAD: Fully qualified inline
def validate(input: String): zio.prelude.Validation[
  com.risquanter.register.domain.errors.ValidationError,
  com.risquanter.register.domain.data.RiskLeaf
] = ...

// GOOD: Top-level imports, short names
import zio.prelude.Validation
import com.risquanter.register.domain.errors.ValidationError
import com.risquanter.register.domain.data.RiskLeaf

def validate(input: String): Validation[ValidationError, RiskLeaf] = ...
```

### ❌ Scattered Local Imports

```scala
// BAD: Import inside every method
def method1() = {
  import com.risquanter.register.domain.errors.ValidationError
  ...
}

def method2() = {
  import com.risquanter.register.domain.errors.ValidationError  // duplicate!
  ...
}

// GOOD: Single top-level import
import com.risquanter.register.domain.errors.ValidationError

def method1() = ...
def method2() = ...
```

### ❌ Wildcard Import When Few Types Used

```scala
// BAD: Import everything when using one type
import com.risquanter.register.domain.data.*

val leaf: RiskLeaf = ...  // only RiskLeaf used

// GOOD: Explicit imports
import com.risquanter.register.domain.data.RiskLeaf

val leaf: RiskLeaf = ...
```

### ❌ Missing Import Grouping

```scala
// BAD: Mixed import sources
import com.risquanter.register.domain.data.RiskLeaf
import zio.*
import scala.collection.mutable
import com.risquanter.register.services.RiskTreeService

// GOOD: Grouped by origin with blank lines
import scala.collection.mutable

import zio.*

import com.risquanter.register.domain.data.RiskLeaf
import com.risquanter.register.services.RiskTreeService
```

---

## Implementation

| Scope | Convention |
|-------|------------|
| Type signatures | Always short names via top-level imports |
| Method bodies | Short names; local import only for disambiguation |
| Import order | stdlib → ZIO → project (with blank line separators) |
| Wildcards | Only for packages where 3+ types used |

---

## References

- Scala 3 import syntax: https://docs.scala-lang.org/scala3/book/packaging-imports.html
- Scalafmt import rules: https://scalameta.org/scalafmt/docs/configuration.html#imports
